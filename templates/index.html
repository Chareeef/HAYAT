{% extends 'layout.html' %}
{% block style %}
<link rel="stylesheet" href="../static/styles/filter.css">		
<link rel="stylesheet" href="../static/styles/blood_bags.css">		
{% endblock style %}

{% block main %}
<main>
	<!-- Render flashed messages -->
	<div>
		{% with messages = get_flashed_messages(with_categories=true) %}
		{% if messages %}
		{% for category, message in messages %}
		<div class="alert alert-{{ category }}">
			{{ message }}
		</div>
		{% endfor  %}
		{% endif %}
		{% endwith %}
	</div>

	<!-- Filter section -->
	<h3 class="filter_header">Transfusion Center Filter</h3>
	<section>
		<div class="filter">
			<form method="POST" action="">
				{{ tc_filter.hidden_tag() }}
				<div>
					<label for="country">Country</label>
					{{ tc_filter.country }}
				</div>
				<div>
					<label for="city">City</label>
					{{ tc_filter.city }}
				</div>
				<div>
					<label for="center">Center</label>
					{{ tc_filter.center }}
				</div>

				<div>
					{{ tc_filter.search }}
				</div>
			</form>
		</div>
	</section>

	{% if center %}
	<!-- Blood Bags Section -->
	<h3 class="bags_header">{{ center.name }}'s Blood Bags :</h3>

	<section class="section_bags">
		<div class="blood-bags">
			{% for bag in center.blood_bags %}
			<article class="blood-bag">
				<h2 class="blood-category">{{ bag.blood_category }}</h2>
				<p class="quantity"><strong>Number of Bags:</strong> {{ bag.quantity }}</p>
				<p class="situation"><strong>Situation:</strong> <span class="{{ bag.situation.lower().replace(' ', '-') }}">{{ bag.situation }}</span></p>
				<div class="updated-at">
					<p>Last Update : {{ bag.updated_at.strftime('%a %d/%m/%Y at %H:%M') }}</p>
				</div>
			</article>
			{% if loop.index % 4 == 0 %}
		</div><div class="blood-bags">
			{% endif %}
			{% endfor %}
		</div>
	<section>
			{% endif %}
</main>

<!-- Why Donate Blood -->
<section class="why_donate" id="donate">
	<h2 class="title">Why Donate Blood?</h2>
	<p class="text">
	Blood donation is a noble cause that helps save lives.
	</br>
	Your contribution can make a significant impact on	those in need.
	</p>
</section>
{% endblock main %}
